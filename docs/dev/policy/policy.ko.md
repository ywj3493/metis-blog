# 개발 정책

## 목적

이 문서는 개발자 (인간 및 Claude와 같은 AI 어시스턴트)가 이 저장소에서 협업하는 방법을 정의합니다. 계획, 문서화, 코드 품질, 일상적인 개발 워크플로우에 대한 기대사항을 설정합니다.

## 이 문서를 사용해야 할 때

다음이 필요할 때 이 문서를 사용하세요:

- **문서 워크플로우 이해** → [문서 구조](#문서-구조) 참조
- **문서 생성 또는 구성** → [문서 책임](#문서-책임) 참조
- **새로운 작업 시작** → [Issue 기반 워크플로우](#issue-기반-워크플로우) 참조
- **언어 규칙 결정** → [언어 규칙](#2-언어-규칙) 참조
- **코드 품질 표준 이해** → [코드 품질 기준](#코드-품질-기준) 참조
- **리뷰 프로세스 학습** → [리뷰 및 품질 게이트](#리뷰-및-품질-게이트) 참조

**관련 문서**:

- 커밋 작성? → [commit-convention.ko.md](./commit-convention.ko.md)
- 브랜치/PR 생성? → [branching-strategy.ko.md](./branching-strategy.ko.md)
- 파일/코드 네이밍? → [naming-conventions.ko.md](./naming-conventions.ko.md)
- 테스트 작성? → [testing-policy.ko.md](./testing-policy.ko.md)

## 핵심 원칙

### 1. 문서 기반 개발

- **모든 작업이 문서화됨**: 모든 중요한 변경, 결정, 기능은 `docs/`에 문서화되어야 합니다
- **문서는 살아있음**: 사후에 하는 것이 아니라 코드베이스가 진화함에 따라 문서를 업데이트합니다
- **Claude는 먼저 문서를 참조**: 기능을 구현하기 전에 Claude는 관련 문서를 읽어야 합니다
- **Issue 기반 워크플로우**: 모든 계획된 작업은 `docs/issue/`의 issue 문서로 시작합니다

### 2. 언어 규칙

#### 코드 및 문서는 영어

- **코드**: 모든 코드, 주석, 변수명, 함수명은 영어로
- **문서**: `docs/` 하위 모든 문서 (`docs/dev/` 제외)는 영어로 작성
- **커뮤니케이션**: Git 커밋, PR 설명, issue 문서는 영어로

#### 개발자 커뮤니케이션은 한국어

- **위치**: `docs/dev/` 폴더에 한국어 번역 포함
- **네이밍**: 한국어 파일은 `.ko.md` 접미사 사용 (예: `architecture.ko.md`)
- **목적**: 한국인 개발자와의 커뮤니케이션 활성화
- **유지관리**: Claude는 먼저 영어 문서를 작성한 다음 한국어 번역 생성

### 3. 보안 및 프라이버시

- **코드에 비밀 없음**: API 키, 비밀번호, 토큰을 절대 커밋하지 않습니다
- **환경 변수 사용**: `.env.local` (로컬) 또는 Vercel 설정 (프로덕션)에 민감한 데이터 저장
- **문서에 PII 없음**: 문서나 커밋에 개인 식별 정보 회피
- **자격 증명 교체**: API 키와 액세스 토큰을 주기적으로 업데이트

## 문서 구조

### 폴더 구성

```text
docs/
├── specifications/    # 기술 명세, 아키텍처, 요구사항
├── issue/            # Issue 계획 문서 (issue0XX.md)
├── reference/        # 외부 API/SDK 문서 (사용자 추가만)
├── policy/           # 개발 정책 및 규칙
└── dev/              # 모든 문서의 한국어 번역
```

### 문서 책임

#### 문서를 작성해야 하는 경우

1. **새 기능**: 먼저 issue 문서 작성, 그 다음 specifications/requirements.md 업데이트
2. **아키텍처 변경**: specifications/architecture.md 업데이트
3. **새 통합**: specifications/infrastructure.md에 문서화하고 reference/에 참조 추가
4. **정책 변경**: 관련 정책 문서 업데이트
5. **버그 수정**: 근본 원인 및 수정 사항으로 issue 문서 업데이트

#### 무엇을 문서화할지

**문서화해야 할 것**:
- 아키텍처 결정 및 근거
- 명확하지 않은 구현 패턴
- 통합 설정 및 구성
- 워크플로우 변경
- 알려진 제한사항 및 해결책

**문서화하지 않을 것**:
- 명백한 코드 동작 (자체 문서화 코드 선호)
- 중복 정보 (복제 대신 링크)
- 임시 구현 세부사항
- 기술적 근거 없는 개인 의견

### 교차 링킹

- 상대 마크다운 링크 사용: `[architecture](../specifications/architecture.md)`
- 특정 섹션에 링크: `[FSD Layers](../specifications/architecture.md#layer-responsibilities)`
- 복잡한 패턴을 설명할 때 코드 주석에서 문서로 링크

## Issue 기반 워크플로우

### Issue 문서 형식

모든 작업 항목은 `docs/issue/`에 마크다운 문서로 추적됩니다:

- **네이밍**: 0으로 패딩된 순차 번호를 가진 `issue0XX.md` (085부터 시작)
- **템플릿**: `docs/issue/issue085.md`를 템플릿으로 사용
- **라이프사이클**: Draft → In Progress → Ready for Review → Done

### 새 Issue 생성하기

1. **다음 번호 식별**: `docs/issue/`에서 최신 issue 번호 확인
2. **템플릿 복사**: `issue085.md` 구조 복제
3. **섹션 작성**:
   - **Summary**: 문제/기능에 대한 간단한 설명
   - **Background**: 컨텍스트 및 동기
   - **Goals**: 명확한 성공 기준
   - **Proposed Approach**: 기술 솔루션 개요
   - **Implementation Checklist**: 단계별 작업
   - **Validation Plan**: 완료를 확인하는 방법
   - **Rollout**: 배포 및 모니터링 계획
   - **Status Log**: 진행 상황의 실행 기록

4. **Issue에 링크**: 브랜치명, 커밋, PR에서 참조

### Issue 라이프사이클

```text
Draft
  ↓ (계획 완료, 접근 방법 합의)
In Progress
  ↓ (구현 완료, 검증 완료)
Ready for Review
  ↓ (리뷰 승인, 병합됨)
Done
```

**상태 업데이트**: 날짜가 기록된 항목으로 Status Log 섹션 유지

## 코드 품질 기준

### 타입 안전성

- **TypeScript strict 모드**: `tsconfig.json`에서 활성화
- **`any` 타입 없음**: 적절한 타입 사용 또는 가드와 함께 `unknown` 사용
- **런타임 검증**: 외부 데이터(Notion API 응답)에 타입 가드 사용
- **미사용 변수 없음**: TypeScript 컴파일러에 의해 강제됨

### 코드 스타일

- **포매터**: Biome (`pnpm biome:write`)
- **린터**: Next.js 규칙이 있는 ESLint (`pnpm lint`)
- **커밋 전 실행**: 포매팅 및 린팅이 통과하는지 확인
- **스타일 논쟁 없음**: 도구 결정이 최종

### 아키텍처 준수

- **FSD 레이어 따르기**: [architecture.md](../specifications/architecture.md) 참조
- **Import 규칙 존중**: FSD 계층에서 상향 import 절대 금지
- **올바른 레이어 배치**: 도메인 로직은 entities에, 작업 로직은 features에
- **순환 의존성 없음**: 순환 import를 피하도록 설계

### 테스팅 요구사항

- **중요한 경로**: entities, features, API routes 테스트
- **모킹용 MSW**: 외부 API 호출에 MSW 사용
- **회귀 테스트**: 버그 수정 시 테스트 추가
- **PR 전 테스트**: 리뷰 요청 전 `pnpm test` 실행

자세한 테스팅 기준은 [testing-policy.md](./testing-policy.md) 참조

## 변경 계획 및 실행

### 워크플로우

1. **Issue 초안 작성**: 컨텍스트 및 목표로 issue 문서 생성 또는 업데이트
2. **요구사항 명확화**: 미해결 질문 해결, 가정 문서화
3. **접근 방법 합의**: 제안된 솔루션 검토, 필요시 조정
4. **구현**: 아키텍처 가이드라인 및 코딩 표준 준수
5. **검증**: 검증 계획에 따라 테스트 실행, 수동 검증
6. **문서 업데이트**: 관련 문서에 변경사항 반영
7. **리뷰 요청**: issue 문서를 참조하는 PR 제출
8. **반복**: 피드백 처리, issue 로그 업데이트
9. **병합 및 배포**: issue 완료, 상태를 Done으로 업데이트

### Pull Request 가이드라인

- **작은 PR 선호**: 단일 issue에 집중, 범위 확장 회피
- **Issue 참조**: 설명에 `docs/issue/issue0XX.md` 링크
- **변경사항 설명**: 무엇이 변경되었고 왜 변경되었는지 요약
- **검증 포함**: 변경사항이 어떻게 테스트되었는지 기록
- **위험 문서화**: 추가 리뷰가 필요한 영역 강조

브랜치 명명 및 PR 워크플로우 세부사항은 [branching-strategy.md](./branching-strategy.md) 참조

## 리뷰 및 품질 게이트

### 병합 전 체크리스트

PR 병합 전:

- [ ] 린팅 통과 (`pnpm lint`)
- [ ] 포매팅 적용 (`pnpm biome:write`)
- [ ] 테스트 통과 (`pnpm test`)
- [ ] 빌드 성공 (`pnpm build`)
- [ ] 수동 테스팅 완료 (issue 검증 계획 기준)
- [ ] 문서 업데이트 (해당하는 경우)
- [ ] 상태로 issue 문서 업데이트

### 코드 리뷰 초점

**리뷰어가 확인해야 할 사항**:
- 아키텍처 준수 (FSD 레이어)
- 타입 안전성 및 오류 처리
- 보안 우려사항 (비밀 누출 없음)
- 성능 영향
- 변경사항에 대한 테스트 커버리지
- 문서 정확성

**리뷰 대상이 아닌 것**:
- 스타일 세부사항 (도구로 처리)
- 개인 선호도
- 관련 없는 리팩토링 제안

## 문서 유지관리

### 문서를 최신 상태로 유지하기

- **완료 정의의 일부**: 문서가 업데이트될 때까지 issue 완료 안 됨
- **복제하지 않고 업데이트**: 중복 파일 생성보다 기존 문서 수정
- **오래된 정보 아카이브**: 사용 중단 기록 및 대체에 링크
- **변경사항 교차 참조**: 문서 이동/이름 변경 시 링크 업데이트

### 한국어 번역 워크플로우

영어 문서를 작성하거나 업데이트할 때:

1. **먼저 영어 작성**: 적절한 `docs/` 폴더에서 영어 버전 완성
2. **한국어 미러 생성**: `docs/dev/`에서 `.ko.md` 접미사로 한국어로 번역
3. **구조 유지**: 동일한 폴더 구조 유지 (예: `docs/specifications/architecture.md` → `docs/dev/specifications/architecture.ko.md`)
4. **두 버전 모두 업데이트**: 업데이트 시 영어 및 한국어 모두 수정

## 세분화된 정책 참조

이 문서는 높은 수준의 정책 개요를 제공합니다. 특정 주제는 다음을 참조하세요:

- **[commit-convention.md](./commit-convention.md)**: 커밋 메시지 형식 및 유형
- **[branching-strategy.md](./branching-strategy.md)**: 브랜치 명명 및 PR 워크플로우
- **[naming-conventions.md](./naming-conventions.md)**: 파일, 디렉토리, 코드 명명
- **[testing-policy.md](./testing-policy.md)**: 테스팅 접근 방법 및 기준

## 인간과 AI 간의 협업

### Claude의 책임

1. **먼저 문서 읽기**: 구현 전에 항상 `docs/` 참조
2. **문서 업데이트**: 코드 변경사항으로 문서를 최신 상태로 유지
3. **Issue 문서 생성**: 새 작업을 위한 issue0XX.md 초안 작성
4. **규칙 준수**: 이 폴더의 모든 정책 준수
5. **불확실할 때 질문**: 가정하기보다 명확화 요청

### 인간 개발자의 책임

1. **Claude의 작업 검토**: 구현이 의도와 일치하는지 확인
2. **컨텍스트 제공**: 도메인 지식 및 요구사항 공유
3. **참조 문서 업데이트**: `docs/reference/`에 외부 API 문서 추가
4. **최종 결정**: 모호성 해결 및 접근 방법 승인

### 커뮤니케이션 프로토콜

- **문서 및 코드에서 영어**: 공개 아티팩트를 영어로 유지
- **한국어 번역**: 한국인 팀원과의 커뮤니케이션 활성화
- **Issue 문서**: 구현 중 단일 진실 공급원
- **상태 업데이트**: 투명성을 위한 issue 로그 유지

## 예외 및 유연성

### 언제 벗어날지

정책은 절대 규칙이 아닌 가이드라인입니다. 다음의 경우 벗어나세요:

- **긴급 핫픽스**: issue에 벗어남 및 이유 문서화
- **실험적 기능**: 실험적 상태를 명확히 기록
- **외부 제약**: 타사 통합이 다른 접근 방법 필요

### 예외 요청 방법

1. **Issue에 문서화**: 왜 벗어남이 필요한지 설명
2. **대안 제안**: 위험을 완화할 방법 표시
3. **합의 받기**: 진행하기 전에 팀과 논의
4. **정책 업데이트**: 패턴이 반복되면 정책 문서 업데이트

## 정책 진화

이 정책 문서는 프로젝트와 함께 진화합니다:

- **변경 제안**: 정책 업데이트에 대한 근거로 issue 열기
- **영향 논의**: 변경이 기존 작업에 미치는 영향 고려
- **정책 업데이트**: 이 문서 및 관련 정책 파일 수정
- **커뮤니케이션**: 모든 협력자가 변경사항을 인지하도록 보장

예측 가능하고 잘 문서화된 정책을 유지하면 협업이 효과적이고 감사 가능합니다.
